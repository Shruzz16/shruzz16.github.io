---
layout: wrapper
---

<div class="post-view">
  <div class="summary">

    <div class="title-header">
      <h1>{{ page.title }}</h1>
    </div>

    <div class="project-description">
      <h2>Project Overview</h2>
      <p>{{ page.description }}</p>
    </div>

    <div class="skills-card">
      <h2>Skills Used</h2>
      <div class="skills-list">
        {% for skill in page.skills %}
          <span class="skill">{{ skill }}</span>
        {% endfor %}
      </div>
    </div>

    {% assign folder_path = page.path | split: "/" | slice: 0, 2 | join: "/" %}

    {% if page.images and page.images.size > 0 %}
      <!-- Grid gallery -->
      <div class="portfolio-grid">
        {% for image in page.images %}
          {% assign image_path = "/" | append: folder_path | append: image %}
          <a href="{{ image_path }}" data-gallery="project" aria-label="Open image {{ forloop.index }}">
            <img src="{{ image_path }}" alt="{{ page.title }} image {{ forloop.index }}">
          </a>
        {% endfor %}
      </div>
    {% else %}
      <!-- Static fallback image -->
      {% assign image_path = "/" | append: folder_path | append: page['main-image'] %}
      <img src="{{ image_path }}" alt="{{ page.title }} image" class="d-block w-100">
    {% endif %}

  </div>

  <div class="content">
    {{ content }}
  </div>

  <!-- Lightbox (overlay + arrows) -->
  <div id="lightbox" class="lb" aria-hidden="true">
    <button class="lb__btn lb__close" type="button" aria-label="Close">×</button>
    <button class="lb__btn lb__prev" type="button" aria-label="Previous">‹</button>

    <figure class="lb__figure">
      <img class="lb__img" alt="">
      <figcaption class="lb__caption" aria-live="polite"></figcaption>
    </figure>

    <button class="lb__btn lb__next" type="button" aria-label="Next">›</button>
  </div>

  <style>
    /* Lightbox styles (self-contained) */
    .lb{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.85);z-index:9999;padding:24px}
    .lb.is-open{display:flex}
    .lb__figure{margin:0;max-width:min(1100px,92vw);max-height:92vh;display:flex;flex-direction:column;gap:10px;align-items:center}
    .lb__img{max-width:100%;max-height:82vh;object-fit:contain;border-radius:10px;background:#111}
    .lb__caption{color:#fff;font-size:14px;opacity:.9;text-align:center}
    .lb__btn{position:absolute;border:none;background:rgba(255,255,255,.12);color:#fff;cursor:pointer;border-radius:12px;line-height:1;padding:10px 14px}
    .lb__btn:hover{background:rgba(255,255,255,.20)}
    .lb__close{top:18px;right:18px;font-size:26px}
    .lb__prev{left:18px;font-size:40px;padding:10px 16px}
    .lb__next{right:18px;font-size:40px;padding:10px 16px}

    @media (max-width:768px){
      .lb{padding:14px}
      .lb__prev{left:10px}
      .lb__next{right:10px}
      .lb__close{top:10px;right:10px}
    }
  </style>

  <script>
    (function () {
      const links = Array.from(document.querySelectorAll('a[data-gallery="project"]'));
      if (!links.length) return;

      const lb = document.getElementById('lightbox');
      const img = lb.querySelector('.lb__img');
      const cap = lb.querySelector('.lb__caption');
      const btnClose = lb.querySelector('.lb__close');
      const btnPrev = lb.querySelector('.lb__prev');
      const btnNext = lb.querySelector('.lb__next');

      let index = 0;

      function openAt(i) {
        index = (i + links.length) % links.length;
        const href = links[index].getAttribute('href');
        img.src = href;
        img.alt = links[index].querySelector('img')?.alt || 'Project image';
        cap.textContent = `${index + 1} / ${links.length}`;
        lb.classList.add('is-open');
        lb.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }

      function close() {
        lb.classList.remove('is-open');
        lb.setAttribute('aria-hidden', 'true');
        img.src = '';
        document.body.style.overflow = '';
      }

      function next() { openAt(index + 1); }
      function prev() { openAt(index - 1); }

      links.forEach((a, i) => {
        a.addEventListener('click', (e) => {
          e.preventDefault();
          openAt(i);
        });
      });

      btnClose.addEventListener('click', close);
      btnNext.addEventListener('click', next);
      btnPrev.addEventListener('click', prev);

      // Close when clicking outside the image
      lb.addEventListener('click', (e) => {
        if (e.target === lb) close();
      });

      // Keyboard controls
      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('is-open')) return;
        if (e.key === 'Escape') close();
        if (e.key === 'ArrowRight') next();
        if (e.key === 'ArrowLeft') prev();
      });
    })();
  </script>

</div>
